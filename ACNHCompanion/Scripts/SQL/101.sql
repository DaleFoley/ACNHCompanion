alter table critters
	add CatchStartTime time default 0 not null;

alter table critters
	add CatchEndTime time default 0 not null;
	
update critters set CatchStartTime = '04:00', CatchEndTime = '19:00' where ID = 1;
update critters set CatchStartTime = '04:00', CatchEndTime = '19:00' where ID = 2;
update critters set CatchStartTime = '04:00', CatchEndTime = '19:00' where ID = 3;
update critters set CatchStartTime = '04:00', CatchEndTime = '19:00' where ID = 4;
update critters set CatchStartTime = '04:00', CatchEndTime = '19:00' where ID = 5;
update critters set CatchStartTime = '08:00', CatchEndTime = '19:00' where ID = 6;
update critters set CatchStartTime = '04:00', CatchEndTime = '19:00' where ID = 7;
update critters set CatchStartTime = '04:00', CatchEndTime = '17:00' where ID = 8;
update critters set CatchStartTime = '17:00', CatchEndTime = '08:00' where ID = 9;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 10;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 11;
update critters set CatchStartTime = '08:00', CatchEndTime = '16:00' where ID = 12;
update critters set CatchStartTime = '19:00', CatchEndTime = '04:00' where ID = 13;
update critters set CatchStartTime = '19:00', CatchEndTime = '04:00' where ID = 14;
update critters set CatchStartTime = '08:00', CatchEndTime = '16:00' where ID = 15;
update critters set CatchStartTime = '08:00', CatchEndTime = '19:00' where ID = 16;
update critters set CatchStartTime = '08:00', CatchEndTime = '19:00' where ID = 17;
update critters set CatchStartTime = '08:00', CatchEndTime = '19:00' where ID = 18;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 19;
update critters set CatchStartTime = '17:00', CatchEndTime = '08:00' where ID = 20;
update critters set CatchStartTime = '17:00', CatchEndTime = '08:00' where ID = 21;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 22;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 23;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 24;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 25;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 26;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 27;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 28;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 29;
update critters set CatchStartTime = '04:00', CatchEndTime = '08:00' where ID = 30;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 31;
update critters set CatchStartTime = '08:00', CatchEndTime = '19:00' where ID = 32;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 33;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 34;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 35;
update critters set CatchStartTime = '19:00', CatchEndTime = '04:00' where ID = 36;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 37;
update critters set CatchStartTime = '08:00', CatchEndTime = '19:00' where ID = 38;
update critters set CatchStartTime = '08:00', CatchEndTime = '19:00' where ID = 39;
update critters set CatchStartTime = '19:00', CatchEndTime = '08:00' where ID = 40;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 41;
update critters set CatchStartTime = '19:00', CatchEndTime = '08:00' where ID = 42;
update critters set CatchStartTime = '08:00', CatchEndTime = '17:00' where ID = 43;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 44;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 45;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 46;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 47;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 48;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 49;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 50;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 51;
update critters set CatchStartTime = '13:00', CatchEndTime = '08:00' where ID = 52;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 53;
update critters set CatchStartTime = '17:00', CatchEndTime = '08:00' where ID = 54;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 55;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 56;
update critters set CatchStartTime = '13:00', CatchEndTime = '08:00' where ID = 57;
update critters set CatchStartTime = '19:00', CatchEndTime = '08:00' where ID = 58;
update critters set CatchStartTime = '17:00', CatchEndTime = '08:00' where ID = 59;
update critters set CatchStartTime = '17:00', CatchEndTime = '08:00' where ID = 60;
update critters set CatchStartTime = '17:00', CatchEndTime = '08:00' where ID = 61;
update critters set CatchStartTime = '17:00', CatchEndTime = '08:00' where ID = 62;
update critters set CatchStartTime = '17:00', CatchEndTime = '08:00' where ID = 63;
update critters set CatchStartTime = '17:00', CatchEndTime = '08:00' where ID = 64;
update critters set CatchStartTime = '17:00', CatchEndTime = '08:00' where ID = 65;
update critters set CatchStartTime = '04:00', CatchEndTime = '08:00' where ID = 66;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 67;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 68;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 69;
update critters set CatchStartTime = '19:00', CatchEndTime = '08:00' where ID = 70;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 71;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 72;
update critters set CatchStartTime = '17:00', CatchEndTime = '04:00' where ID = 73;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 74;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 75;
update critters set CatchStartTime = '13:00', CatchEndTime = '16:00' where ID = 76;
update critters set CatchStartTime = '16:00', CatchEndTime = '13:00' where ID = 77;
update critters set CatchStartTime = '19:00', CatchEndTime = '08:00' where ID = 78;
update critters set CatchStartTime = '19:00', CatchEndTime = '04:00' where ID = 79;
update critters set CatchStartTime = '19:00', CatchEndTime = '04:00' where ID = 80;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 81;
update critters set CatchStartTime = '09:00', CatchEndTime = '16:00' where ID = 82;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 83;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 84;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 85;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 86;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 87;
update critters set CatchStartTime = '09:00', CatchEndTime = '16:00' where ID = 88;
update critters set CatchStartTime = '09:00', CatchEndTime = '16:00' where ID = 89;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 90;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 91;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 92;
update critters set CatchStartTime = '21:00', CatchEndTime = '04:00' where ID = 93;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 94;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 95;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 96;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 97;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 98;
update critters set CatchStartTime = '09:00', CatchEndTime = '16:00' where ID = 99;
update critters set CatchStartTime = '09:00', CatchEndTime = '16:00' where ID = 100;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 101;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 102;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 103;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 104;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 105;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 106;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 107;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 108;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 109;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 110;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 111;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 112;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 113;
update critters set CatchStartTime = '09:00', CatchEndTime = '16:00' where ID = 114;
update critters set CatchStartTime = '09:00', CatchEndTime = '16:00' where ID = 115;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 116;
update critters set CatchStartTime = '09:00', CatchEndTime = '16:00' where ID = 117;
update critters set CatchStartTime = '09:00', CatchEndTime = '16:00' where ID = 118;
update critters set CatchStartTime = '09:00', CatchEndTime = '16:00' where ID = 119;
update critters set CatchStartTime = '09:00', CatchEndTime = '16:00' where ID = 120;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 121;
update critters set CatchStartTime = '04:00', CatchEndTime = '21:00' where ID = 122;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 123;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 124;
update critters set CatchStartTime = '21:00', CatchEndTime = '04:00' where ID = 125;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 126;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 127;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 128;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 129;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 130;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 131;
update critters set CatchStartTime = '04:00', CatchEndTime = '21:00' where ID = 132;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 133;
update critters set CatchStartTime = '21:00', CatchEndTime = '04:00' where ID = 134;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 135;
update critters set CatchStartTime = '04:00', CatchEndTime = '21:00' where ID = 136;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 137;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 138;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 139;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 140;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 141;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 142;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 143;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 144;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 145;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 146;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 147;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 148;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 149;
update critters set CatchStartTime = '04:00', CatchEndTime = '21:00' where ID = 150;
update critters set CatchStartTime = '04:00', CatchEndTime = '21:00' where ID = 151;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 152;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 153;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 154;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 155;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 156;
update critters set CatchStartTime = '16:00', CatchEndTime = '09:00' where ID = 157;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 158;
update critters set CatchStartTime = '21:00', CatchEndTime = '04:00' where ID = 159;
update critters set CatchStartTime = '00:00', CatchEndTime = '23:59' where ID = 160;

update critters set Rarity = 'Uncommon (★★★)' where ID = 136;

drop view if exists v_base_critters;
create view v_base_critters
as
    select critters.ID,
           critters.CritterName,
           critters.SellPrice,
           critters.Location,
           critters.Time,
           critters.ShadowSize,
           critters.Type,
           critters.ImageName,
           critters.Rarity,
           critters.IsDonated,
          case
            when datetime('now', 'localtime') >= datetime(date('now') || critters.CatchStartTime) and datetime('now', 'localtime') <= (case when datetime(date('now') || critters.CatchEndTime) < datetime(date('now') || critters.CatchStartTime) then datetime(date('now') || critters.CatchEndTime, '+1 day') else critters.CatchEndTime end) then true else false
            end as IsCatchableBasedOnTime
    from critters
    order by critters.CritterName;
	   
drop view if exists v_bugs_northern;
create view v_bugs_northern
as 
select v_base_critters.*,
	   northern_months.months,
	   case when instr(northern_months.months,
		   case strftime('%m', date('now'))
			when '01' then 'jan'
			when '02' then 'feb'
			when '03' then 'mar'
			when '04' then 'apr'
			when '05' then 'may'
			when '06' then 'jun'
			when '07' then 'jul'
			when '08' then 'aug'
			when '09' then 'sep'
			when '10' then 'oct'
			when '11' then 'nov'
			when '12' then 'dec'
			else '' end) > 0 then true else false end as IsCatchableBasedOnMonth
from v_base_critters
inner join northern_months on northern_months.CritterName = v_base_critters.CritterName
where v_base_critters.Type = 'bug'
order by v_base_critters.CritterName;   
	   
drop view if exists  v_bugs_southern;
create view v_bugs_southern
as
   select v_base_critters.*,
	   southern_months.months,
	   case when instr(southern_months.months,
		   case strftime('%m', date('now'))
			when '01' then 'jan'
			when '02' then 'feb'
			when '03' then 'mar'
			when '04' then 'apr'
			when '05' then 'may'
			when '06' then 'jun'
			when '07' then 'jul'
			when '08' then 'aug'
			when '09' then 'sep'
			when '10' then 'oct'
			when '11' then 'nov'
			when '12' then 'dec'
			else '' end) > 0 then true else false end as IsCatchableBasedOnMonth                  
	   from v_base_critters
	   inner join southern_months on southern_months.CritterName = v_base_critters.CritterName
	   where v_base_critters.Type = 'bug'
	   order by v_base_critters.CritterName;

drop view if exists  v_fish_northern;
create view v_fish_northern
as
   select v_base_critters.*,
		  northern_months.months,
		  case when instr(northern_months.months,
			   case strftime('%m', date('now'))
				when '01' then 'jan'
				when '02' then 'feb'
				when '03' then 'mar'
				when '04' then 'apr'
				when '05' then 'may'
				when '06' then 'jun'
				when '07' then 'jul'
				when '08' then 'aug'
				when '09' then 'sep'
				when '10' then 'oct'
				when '11' then 'nov'
				when '12' then 'dec'
				else '' end) > 0 then true else false end as IsCatchableBasedOnMonth                  
   from v_base_critters
   inner join northern_months on northern_months.CritterName = v_base_critters.CritterName
   where v_base_critters.Type = 'fish'
   order by v_base_critters.CritterName;

drop view if exists  v_fish_southern;
create view v_fish_southern
as
   select v_base_critters.*,
		  southern_months.months,
   case when instr(southern_months.months,
	   case strftime('%m', date('now'))
		when '01' then 'jan'
		when '02' then 'feb'
		when '03' then 'mar'
		when '04' then 'apr'
		when '05' then 'may'
		when '06' then 'jun'
		when '07' then 'jul'
		when '08' then 'aug'
		when '09' then 'sep'
		when '10' then 'oct'
		when '11' then 'nov'
		when '12' then 'dec'
		else '' end) > 0 then true else false end as IsCatchableBasedOnMonth
   from v_base_critters
   inner join southern_months on southern_months.CritterName = v_base_critters.CritterName
   where v_base_critters.Type = 'fish'
   order by v_base_critters.CritterName;
